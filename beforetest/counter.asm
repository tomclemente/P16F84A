LIST P=16F84A, F=INHX8M
INCLUDE<P16F84.INC>
__CONFIG 3FF5H

TEMPUP EQU 0CH
TEMPDN EQU 0DH

TEMP1 EQU 0EH
TEMP2 EQU 0FH


MAIN	BSF STATUS, RP0
		CLRF TRISB
	
		BSF TRISA, 0
		BSF TRISA, 0
		MOVLW 0EH
		MOVWF OPTION_REG
		BCF STATUS, RP0
		MOVLW 00H
		MOVWF TEMPUP
		MOVLW 0BH
		MOVWF TEMPDN
		MOVLW 00H	
		MOVWF TEMP1

CHECK	MOVLW 0AH
		SUBWF TEMPUP, W
		BTFSC STATUS, Z	
		GOTO IPAZERO
		
		
		BTFSC PORTA, 0
		GOTO COUNTUPCHECK
		BTFSC PORTA, 1
		GOTO COUNTDNCHECK
		GOTO CHECK
IPAZERO	MOVLW 00H
		MOVWF TEMPUP
EPAZERO MOVLW 0BH
		MOVWF TEMPDN

COUNTUPCHECK	BTFSC PORTA, 1
				GOTO CHECK
				INCF TEMPUP, F
				MOVF TEMPUP, W
				CALL UP
				MOVWF PORTB
				SLEEP
				GOTO CHECK
COUNTDNCHECK	BTFSC PORTA, 0
				GOTO CHECK
				DECF TEMPDN, F				
				MOVF TEMPDN, W
				CALL UP
				MOVWF PORTB
				SLEEP
		
				MOVLW 00H
				XORWF TEMPDN, W
				BTFSC STATUS, Z
				GOTO EPAZERO
	
				GOTO CHECK
				


UP	ADDWF PCL, F
	NOP
	RETLW 00H
	RETLW 01H
	RETLW 02H
	RETLW 03H
	RETLW 04H
	RETLW 05H
	RETLW 06H
	RETLW 07H
	RETLW 08H
	RETLW 09H

		
		
		END
		