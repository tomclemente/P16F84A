LIST P=P16F84A, F=INHX8M
INCLUDE<P16F84.INC>
__CONFIG(0X3FF5);

TEMP EQU 0CH

MAIN	BSF STATUS, RP0
		CLRF TRISB
		MOVLW 01H
		MOVWF TRISA
		MOVLW 0EH
		MOVWF OPTION_REG
		BCF STATUS, RP0
		MOVLW 00H
		MOVWF TEMP
CHECK	BTFSS PORTA, 0
		GOTO CHECK
		GOTO TUYOK

STEP	ADDWF PCL, F
		NOP	
		RETLW 08H ;w=08h
		RETLW 04H
		RETLW 02H
		RETLW 01H
		RETURN

TUYOK	INCF TEMP, F ;TEMP = TEMP+1
		MOVF TEMP, W ;W=1
		CALL STEP
		MOVWF PORTB
		MOVLW 04H
		SUBWF TEMP, W
		BTFSS STATUS, Z
		GOTO CHECK
		MOVLW 00H
		MOVWF TEMP
		GOTO CHECK

END