LIST P=P16F84A, F=INHX8M
INCLUDE<P16F84.INC>
__CONFIG 3FF5H

FLAG EQU 0CH
TEMP EQU 0DH

ORG 0000H
GOTO INIT
GOTO MAIN
ORG 0004H
GOTO INT_ROUTINE

INIT	CLRF STATUS
		BSF STATUS, RP0
		MOVLW 0EH ;1SECOND
		MOVWF OPTION_REG
		MOVLW 0F0H
		MOVWF TRISB
		BCF STATUS, RP0
		BSF INTCON, GIE
		BSF INTCON, RBIE
		MOVLW 00H
		MOVWF FLAG
		MOVWF PORTB
		MOVWF TEMP

MAIN	BTFSS FLAG, 0 
		GOTO MAIN
		BCF FLAG, 0
		MOVF PORTB, W
		MOVWF TEMP
		SWAPF TEMP, F
		RLF TEMP
		MOVF TEMP, W
		;MOVLW 0EH
		;ANDWF PORTB, W
		MOVWF PORTB
	
		BSF INTCON, GIE
		BSF INTCON, RBIE
		GOTO MAIN
		
		



INT_ROUTINE
	BCF INTCON, GIE
	BTFSS INTCON, RBIE
	RETFIE
	BCF INTCON, RBIE
	BSF FLAG, 0
	RETFIE


END
